<?php

array(40) { [0]=> object(WP_Term)#1161 (10) { 
  ["term_id"]=> int(8) 
  ["name"]=> string(13) "Air Pollution" 
  ["slug"]=> string(13) "air-pollution" 
  ["term_group"]=> int(0) 
  ["term_taxonomy_id"]=> int(8) 
  ["taxonomy"]=> string(11) "impact_tags" 
  ["description"]=> string(0) "" 
  ["parent"]=> int(0) 
  ["count"]=> int(1) 
  ["filter"]=> string(3) "raw" 
} 
[1]=> object(WP_Term)#1162 (10) { 
  ["term_id"]=> int(6) 
  ["name"]=> string(26) "Animal Transmitted Disease" 
  ["slug"]=> string(26) "animal-transmitted-disease" 
  ["term_group"]=> int(0) 
  ["term_taxonomy_id"]=> int(6) 
  ["taxonomy"]=> string(11) "impact_tags" 
  ["description"]=> string(0) "" 
  ["parent"]=> int(0) 
  ["count"]=> int(1) 
  ["filter"]=> string(3) "raw" 
} 
[2]=> object(WP_Term)#1163 (10) { 
  ["term_id"]=> int(7) 
  ["name"]=> string(17) "Biodiversity Loss" 
  ["slug"]=> string(17) "biodiversity-loss" 
  ["term_group"]=> int(0) 
  ["term_taxonomy_id"]=> int(7) 
  ["taxonomy"]=> string(11) "impact_tags" 
  ["description"]=> string(0) "" 
  ["parent"]=> int(0) 
  ["count"]=> int(1) 
  ["filter"]=> string(3) "raw"
} 
[3]=> object(WP_Term)#1164 (10) { 
  ["term_id"]=> int(19) 
  ["name"]=> string(13) "Canal Leakage" 
  ["slug"]=> string(13) "canal-leakage" 
  ["term_group"]=> int(0) 
  ["term_taxonomy_id"]=> int(19) 
  ["taxonomy"]=> string(11) "impact_tags" 
  ["description"]=> string(0) "" 
  ["parent"]=> int(0) 
  ["count"]=> int(1) 
  ["filter"]=> string(3) "raw" 
} 
[4]=> object(WP_Term)#1165 (10) { 
  ["term_id"]=> int(11) 
  ["name"]=> string(13) "Carcass Waste" 
  ["slug"]=> string(13) "carcass-waste" 
  ["term_group"]=> int(0) 
  ["term_taxonomy_id"]=> int(11) 
  ["taxonomy"]=> string(11) "impact_tags" 
  ["description"]=> string(0) "" 
  ["parent"]=> int(0) 
  ["count"]=> int(1) 
  ["filter"]=> string(3) "raw" 
} 
[5]=> object(WP_Term)#1166 (10) { 
  ["term_id"]=> int(34) 
  ["name"]=> string(16) "Chemical Storage" 
  ["slug"]=> string(16) "chemical-storage" 
  ["term_group"]=> int(0) 
  ["term_taxonomy_id"]=> int(34) 
  ["taxonomy"]=> string(11) "impact_tags" 
  ["description"]=> string(0) "" 
  ["parent"]=> int(0) 
  ["count"]=> int(1) 
  ["filter"]=> string(3) "raw" 
} 
[6]=> object(WP_Term)#1167 (10) { ["term_id"]=> int(37) ["name"]=> string(12) "Climate Risk" ["slug"]=> string(12) "climate-risk" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(37) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [7]=> object(WP_Term)#1168 (10) { ["term_id"]=> int(28) ["name"]=> string(13) "Coastal Areas" ["slug"]=> string(13) "coastal-areas" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(28) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [8]=> object(WP_Term)#1169 (10) { ["term_id"]=> int(23) ["name"]=> string(4) "Dams" ["slug"]=> string(4) "dams" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(23) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [9]=> object(WP_Term)#1170 (10) { ["term_id"]=> int(31) ["name"]=> string(13) "Deforestation" ["slug"]=> string(13) "deforestation" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(31) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [10]=> object(WP_Term)#1171 (10) { ["term_id"]=> int(30) ["name"]=> string(15) "Desertification" ["slug"]=> string(15) "desertification" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(30) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [11]=> object(WP_Term)#1172 (10) { ["term_id"]=> int(16) ["name"]=> string(7) "Erosion" ["slug"]=> string(7) "erosion" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(16) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [12]=> object(WP_Term)#1173 (10) { ["term_id"]=> int(39) ["name"]=> string(20) "Erosion Biodiversity" ["slug"]=> string(20) "erosion-biodiversity" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(39) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [13]=> object(WP_Term)#1174 (10) { ["term_id"]=> int(44) ["name"]=> string(14) "Exotic Species" ["slug"]=> string(14) "exotic-species" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(44) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [14]=> object(WP_Term)#1175 (10) { ["term_id"]=> int(38) ["name"]=> string(18) "Extension Policies" ["slug"]=> string(18) "extension-policies" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(38) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [15]=> object(WP_Term)#1176 (10) { ["term_id"]=> int(15) ["name"]=> string(12) "Human Health" ["slug"]=> string(12) "human-health" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(15) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [16]=> object(WP_Term)#1177 (10) { ["term_id"]=> int(26) ["name"]=> string(23) "Irrigation Construction" ["slug"]=> string(23) "irrigation-construction" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(26) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [17]=> object(WP_Term)#1178 (10) { ["term_id"]=> int(22) ["name"]=> string(18) "Irrigation Schemes" ["slug"]=> string(18) "irrigation-schemes" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(22) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [18]=> object(WP_Term)#1179 (10) { ["term_id"]=> int(10) ["name"]=> string(16) "Land Degradation" ["slug"]=> string(16) "land-degradation" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(10) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [19]=> object(WP_Term)#1180 (10) { ["term_id"]=> int(13) ["name"]=> string(20) "Livestock Operations" ["slug"]=> string(20) "livestock-operations" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(13) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [20]=> object(WP_Term)#1181 (10) { ["term_id"]=> int(32) ["name"]=> string(13) "marginallands" ["slug"]=> string(13) "marginallands" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(32) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [21]=> object(WP_Term)#1182 (10) { ["term_id"]=> int(25) ["name"]=> string(21) "operationofirrigation" ["slug"]=> string(21) "operationofirrigation" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(25) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [22]=> object(WP_Term)#1183 (10) { ["term_id"]=> int(18) ["name"]=> string(14) "overirrigation" ["slug"]=> string(14) "overirrigation" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(18) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [23]=> object(WP_Term)#1184 (10) { ["term_id"]=> int(27) ["name"]=> string(17) "protectedhabitats" ["slug"]=> string(17) "protectedhabitats" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(27) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [24]=> object(WP_Term)#1185 (10) { ["term_id"]=> int(24) ["name"]=> string(8) "salinity" ["slug"]=> string(8) "salinity" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(24) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [25]=> object(WP_Term)#1186 (10) { ["term_id"]=> int(40) ["name"]=> string(12) "salinization" ["slug"]=> string(12) "salinization" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(40) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [26]=> object(WP_Term)#1187 (10) { ["term_id"]=> int(17) ["name"]=> string(13) "sedimentation" ["slug"]=> string(13) "sedimentation" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(17) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [27]=> object(WP_Term)#1188 (10) { ["term_id"]=> int(43) ["name"]=> string(9) "siltation" ["slug"]=> string(9) "siltation" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(43) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [28]=> object(WP_Term)#1189 (10) { ["term_id"]=> int(33) ["name"]=> string(13) "socialimpacts" ["slug"]=> string(13) "socialimpacts" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(33) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [29]=> object(WP_Term)#1190 (10) { ["term_id"]=> int(41) ["name"]=> string(14) "soilcompaction" ["slug"]=> string(14) "soilcompaction" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(41) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [30]=> object(WP_Term)#1191 (10) { ["term_id"]=> int(42) ["name"]=> string(15) "soildegredation" ["slug"]=> string(15) "soildegredation" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(42) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [31]=> object(WP_Term)#1192 (10) { ["term_id"]=> int(45) ["name"]=> string(11) "soilerosion" ["slug"]=> string(11) "soilerosion" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(45) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [32]=> object(WP_Term)#1193 (10) { ["term_id"]=> int(20) ["name"]=> string(13) "soilfertility" ["slug"]=> string(13) "soilfertility" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(20) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [33]=> object(WP_Term)#1194 (10) { ["term_id"]=> int(12) ["name"]=> string(9) "vetpharma" ["slug"]=> string(9) "vetpharma" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(12) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [34]=> object(WP_Term)#1195 (10) { ["term_id"]=> int(36) ["name"]=> string(10) "wastewater" ["slug"]=> string(10) "wastewater" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(36) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [35]=> object(WP_Term)#1196 (10) { ["term_id"]=> int(9) ["name"]=> string(14) "waterpollution" ["slug"]=> string(14) "waterpollution" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(9) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [36]=> object(WP_Term)#1197 (10) { 
  ["term_id"]=> int(14) 
  ["name"]=> string(12) "waterquality" 
  ["slug"]=> string(12) "waterquality" 
  ["term_group"]=> int(0) 
  ["term_taxonomy_id"]=> int(14) 
  ["taxonomy"]=> string(11) "impact_tags" 
  ["description"]=> string(0) "" 
  ["parent"]=> int(0) 
  ["count"]=> int(2) 
  ["filter"]=> string(3) "raw" 
} [37]=> object(WP_Term)#1198 (10) { ["term_id"]=> int(35) ["name"]=> string(13) "waterquantity" ["slug"]=> string(13) "waterquantity" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(35) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [38]=> object(WP_Term)#1199 (10) { ["term_id"]=> int(21) ["name"]=> string(10) "watertable" ["slug"]=> string(10) "watertable" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(21) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } [39]=> object(WP_Term)#1200 (10) { ["term_id"]=> int(29) ["name"]=> string(23) "wetlandandriparianareas" ["slug"]=> string(23) "wetlandandriparianareas" ["term_group"]=> int(0) ["term_taxonomy_id"]=> int(29) ["taxonomy"]=> string(11) "impact_tags" ["description"]=> string(0) "" ["parent"]=> int(0) ["count"]=> int(1) ["filter"]=> string(3) "raw" } }


////////////////////////////////////////////////////////


array(6) { 
  [0]=> object(stdClass)#1118 (5) { 
    ["impact_id"]=> string(2) "34" 
    ["impact_title"]=> string(26) "Reduction in water quality" 
    ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=34" 
    ["sector"]=> string(21) "Agriculture" 
    ["sector_slug"]=> string(19) "agriculture" 
  } 
  [1]=> object(stdClass)#1155 (5) { 
    ["impact_id"]=> string(2) "52" 
    ["impact_title"]=> string(15) "Desertification" 
    ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=52" 
    ["sector"]=> string(21) "Agriculture" 
    ["sector_slug"]=> string(19) "agriculture" 
  } 
  [2]=> object(stdClass)#1105 (5) { 
    ["impact_id"]=> string(2) "64" 
    ["impact_title"]=> string(8) "Salinity" 
    ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=64" 
    ["sector"]=> string(24) "Agriculture" 
    ["sector_slug"]=> string(22) "agriculture" 
  } 
  [3]=> object(stdClass)#1115 (5) { 
    ["impact_id"]=> string(2) "70" 
    ["impact_title"]=> string(11) "Water table" 
    ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=70" 
    ["sector"]=> string(24) "Agriculture" 
    ["sector_slug"]=> string(22) "agriculture" 
  } 
  [4]=> object(stdClass)#1114 (5) { 
    ["impact_id"]=> string(2) "72" 
    ["impact_title"]=> string(44) "Irrigation canal leakage and over-irrigation" 
    ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=72" 
    ["sector"]=> string(24) "Agriculture" 
    ["sector_slug"]=> string(22) "agriculture" 
  } 
  [5]=> object(stdClass)#1113 (5) { 
    ["impact_id"]=> string(3) "108" 
    ["impact_title"]=> string(13) "Water Quality" 
    ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=108" 
    ["sector"]=> string(24) "Agriculture" 
    ["sector_slug"]=> string(22) "agriculture" 
  } 
}


////////////////////////////////

array(2) { 
  ["Environmental"]=> array(1) { 
    [0]=> object(stdClass)#1104 (5) { 
      ["impact_id"]=> string(3) "180" 
      ["impact_title"]=> string(18) "test environmental" 
      ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=180" 
      ["sector"]=> string(13) "Environmental" 
      ["sector_slug"]=> string(13) "environmental" 
    } 
  } 
  ["Agriculture"]=> array(17) { 
    [0]=> object(stdClass)#1092 (5) { 
      ["impact_id"]=> string(2) "12" 
      ["impact_title"]=> string(27) "Reduction in soil fertility" 
      ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=12" 
      ["sector"]=> string(11) "Agriculture" 
      ["sector_slug"]=> string(11) "agriculture" 
    } 
    [1]=> object(stdClass)#1106 (5) { 
      ["impact_id"]=> string(2) "14" 
      ["impact_title"]=> string(12) "Soil erosion" 
      ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=14" 
      ["sector"]=> string(11) "Agriculture" 
      ["sector_slug"]=> string(11) "agriculture" 
    } 
    [2]=> object(stdClass)#1182 (5) { 
      ["impact_id"]=> string(2) "24" 
      ["impact_title"]=> string(25) "Siltation of water bodies" 
      ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=24" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [3]=> object(stdClass)#1093 (5) { ["impact_id"]=> string(2) "26" ["impact_title"]=> string(16) "Soil degradation" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=26" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [4]=> object(stdClass)#1091 (5) { ["impact_id"]=> string(2) "28" ["impact_title"]=> string(15) "Soil Compaction" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=28" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [5]=> object(stdClass)#1065 (5) { ["impact_id"]=> string(2) "34" ["impact_title"]=> string(26) "Reduction in water quality" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=34" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [6]=> object(stdClass)#1066 (5) { ["impact_id"]=> string(2) "38" ["impact_title"]=> string(28) "Climate risks and mitigation" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=38" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [7]=> object(stdClass)#1107 (5) { ["impact_id"]=> string(2) "40" ["impact_title"]=> string(5) "Water" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=40" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [8]=> object(stdClass)#1108 (5) { ["impact_id"]=> string(2) "42" ["impact_title"]=> string(44) "Reductions in surface & groundwater quantity" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=42" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [9]=> object(stdClass)#1109 (5) { ["impact_id"]=> string(2) "44" ["impact_title"]=> string(20) "Storage of chemicals" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=44" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [10]=> object(stdClass)#1110 (5) { ["impact_id"]=> string(2) "48" ["impact_title"]=> string(29) "Degradation of marginal lands" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=48" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [11]=> object(stdClass)#1111 (5) { ["impact_id"]=> string(2) "70" ["impact_title"]=> string(11) "Water table" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=70" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [12]=> object(stdClass)#1112 (5) { ["impact_id"]=> string(3) "104" ["impact_title"]=> string(25) "Erosion and Sedimentation" ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=104" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [13]=> object(stdClass)#1113 (5) { ["impact_id"]=> string(3) "108" ["impact_title"]=> string(13) "Water Quality" ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=108" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [14]=> object(stdClass)#1114 (5) { ["impact_id"]=> string(3) "116" ["impact_title"]=> string(16) "Land degradation" ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=116" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [15]=> object(stdClass)#1115 (5) { ["impact_id"]=> string(3) "118" ["impact_title"]=> string(15) "Water pollution" ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=118" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [16]=> object(stdClass)#1116 (5) { ["impact_id"]=> string(3) "122" ["impact_title"]=> string(20) "Loss of biodiversity" ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=122" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } } }


      /////////////////////

array(2) { 
  ["Environmental"]=> array(3) { 
    ["sector_name"]=> string(13) "Environmental" 
    ["sector_id"]=> string(13) "environmental" 
    ["impacts"]=> array(1) { 
      [0]=> object(stdClass)#1104 (5) { 
        ["impact_id"]=> string(3) "180" 
        ["impact_title"]=> string(18) "test environmental" 
        ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=180" 
        ["sector"]=> string(13) "Environmental" 
        ["sector_slug"]=> string(13) "environmental" 
      } 
    } 
  } 
  ["Agriculture"]=> array(3) { 
    ["sector_name"]=> string(11) "Agriculture" 
    ["sector_id"]=> string(11) "agriculture" 
    ["impacts"]=> array(17) { 
      [0]=> object(stdClass)#1092 (5) { 
        ["impact_id"]=> string(2) "12" 
        ["impact_title"]=> string(27) "Reduction in soil fertility" 
        ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=12" 
        ["sector"]=> string(11) "Agriculture" 
        ["sector_slug"]=> string(11) "agriculture" 
      } 
      [1]=> object(stdClass)#1106 (5) { 
        ["impact_id"]=> string(2) "14" 
        ["impact_title"]=> string(12) "Soil erosion" 
        ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=14" 
        ["sector"]=> string(11) "Agriculture" 
        ["sector_slug"]=> string(11) "agriculture" 
      } 
      [2]=> object(stdClass)#1182 (5) { 
        ["impact_id"]=> string(2) "24" 
        ["impact_title"]=> string(25) "Siltation of water bodies" 
        ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=24" 
        ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [3]=> object(stdClass)#1093 (5) { ["impact_id"]=> string(2) "26" ["impact_title"]=> string(16) "Soil degradation" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=26" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [4]=> object(stdClass)#1091 (5) { ["impact_id"]=> string(2) "28" ["impact_title"]=> string(15) "Soil Compaction" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=28" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [5]=> object(stdClass)#1065 (5) { ["impact_id"]=> string(2) "34" ["impact_title"]=> string(26) "Reduction in water quality" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=34" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [6]=> object(stdClass)#1066 (5) { ["impact_id"]=> string(2) "38" ["impact_title"]=> string(28) "Climate risks and mitigation" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=38" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [7]=> object(stdClass)#1107 (5) { ["impact_id"]=> string(2) "40" ["impact_title"]=> string(5) "Water" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=40" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [8]=> object(stdClass)#1108 (5) { ["impact_id"]=> string(2) "42" ["impact_title"]=> string(44) "Reductions in surface & groundwater quantity" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=42" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [9]=> object(stdClass)#1109 (5) { ["impact_id"]=> string(2) "44" ["impact_title"]=> string(20) "Storage of chemicals" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=44" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [10]=> object(stdClass)#1110 (5) { ["impact_id"]=> string(2) "48" ["impact_title"]=> string(29) "Degradation of marginal lands" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=48" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [11]=> object(stdClass)#1111 (5) { ["impact_id"]=> string(2) "70" ["impact_title"]=> string(11) "Water table" ["impact_link"]=> string(64) "http://dev.childressagency.com/ralf/?post_type=impacts&p=70" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [12]=> object(stdClass)#1112 (5) { ["impact_id"]=> string(3) "104" ["impact_title"]=> string(25) "Erosion and Sedimentation" ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=104" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [13]=> object(stdClass)#1113 (5) { ["impact_id"]=> string(3) "108" ["impact_title"]=> string(13) "Water Quality" ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=108" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [14]=> object(stdClass)#1114 (5) { ["impact_id"]=> string(3) "116" ["impact_title"]=> string(16) "Land degradation" ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=116" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [15]=> object(stdClass)#1115 (5) { ["impact_id"]=> string(3) "118" ["impact_title"]=> string(15) "Water pollution" ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=118" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } [16]=> object(stdClass)#1116 (5) { ["impact_id"]=> string(3) "122" ["impact_title"]=> string(20) "Loss of biodiversity" ["impact_link"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=122" ["sector"]=> string(11) "Agriculture" ["sector_slug"]=> string(11) "agriculture" } } } }


        ///////////////////////////////////////

        object(WP_Query)#1113 (49) { 
          ["query"]=> array(3) { 
            ["post_type"]=> array(2) { 
              [0]=> string(7) "impacts" 
              [1]=> string(10) "activities" 
            } 
            ["post_status"]=> string(7) "publish" 
            ["tax_query"]=> array(1) { 
              [0]=> array(3) { 
                ["taxonomy"]=> string(11) "impact_tags" 
                ["field"]=> string(7) "term_id" 
                ["terms"]=> array(1) { 
                  [0]=> string(3) "6,7" 
                } 
              } 
            } 
          } 
          ["query_vars"]=> array(68) { 
            ["post_type"]=> array(2) { 
              [0]=> string(7) "impacts" 
              [1]=> string(10) "activities" 
            } 
            ["post_status"]=> string(7) "publish" 
            ["tax_query"]=> array(1) { 
              [0]=> array(3) { 
                ["taxonomy"]=> string(11) "impact_tags" 
                ["field"]=> string(7) "term_id" 
                ["terms"]=> array(1) { 
                  [0]=> string(3) "6,7" 
                } 
              } 
            } 
            ["error"]=> string(0) "" 
            ["m"]=> string(0) "" 
            ["p"]=> int(0) 
            ["post_parent"]=> string(0) "" 
            ["subpost"]=> string(0) "" 
            ["subpost_id"]=> string(0) "" 
            ["attachment"]=> string(0) "" 
            ["attachment_id"]=> int(0) 
            ["name"]=> string(0) "" 
            ["static"]=> string(0) "" 
            ["pagename"]=> string(0) "" 
            ["page_id"]=> int(0) 
            ["second"]=> string(0) "" 
            ["minute"]=> string(0) "" 
            ["hour"]=> string(0) "" 
            ["day"]=> int(0) 
            ["monthnum"]=> int(0) 
            ["year"]=> int(0) 
            ["w"]=> int(0) 
            ["category_name"]=> string(0) "" 
            ["tag"]=> string(0) "" 
            ["cat"]=> string(0) "" 
            ["tag_id"]=> string(0) "" 
            ["author"]=> string(0) "" 
            ["author_name"]=> string(0) "" 
            ["feed"]=> string(0) "" 
            ["tb"]=> string(0) "" 
            ["paged"]=> int(0) 
            ["meta_key"]=> string(0) "" 
            ["meta_value"]=> string(0) "" 
            ["preview"]=> string(0) "" 
            ["s"]=> string(0) "" 
            ["sentence"]=> string(0) "" 
            ["title"]=> string(0) "" 
            ["fields"]=> string(0) "" 
            ["menu_order"]=> string(0) "" 
            ["embed"]=> string(0) "" 
            ["category__in"]=> array(0) { } 
            ["category__not_in"]=> array(0) { } 
            ["category__and"]=> array(0) { } 
            ["post__in"]=> array(0) { } 
            ["post__not_in"]=> array(0) { } 
            ["post_name__in"]=> array(0) { } 
            ["tag__in"]=> array(0) { } 
            ["tag__not_in"]=> array(0) { } 
            ["tag__and"]=> array(0) { } 
            ["tag_slug__in"]=> array(0) { } 
            ["tag_slug__and"]=> array(0) { } 
            ["post_parent__in"]=> array(0) { } 
            ["post_parent__not_in"]=> array(0) { } 
            ["author__in"]=> array(0) { } 
            ["author__not_in"]=> array(0) { } 
            ["ignore_sticky_posts"]=> bool(false) 
            ["suppress_filters"]=> bool(false) 
            ["cache_results"]=> bool(true) 
            ["update_post_term_cache"]=> bool(true) 
            ["lazy_load_term_meta"]=> bool(true) 
            ["update_post_meta_cache"]=> bool(true) 
            ["posts_per_page"]=> int(10) 
            ["nopaging"]=> bool(false) 
            ["comments_per_page"]=> string(2) "50" 
            ["no_found_rows"]=> bool(false) 
            ["taxonomy"]=> string(11) "impact_tags" 
            ["term_id"]=> string(3) "6,7" 
            ["order"]=> string(4) "DESC" 
          } 
          ["tax_query"]=> object(WP_Tax_Query)#1110 (6) { 
            ["queries"]=> array(1) { 
              [0]=> array(5) { 
                ["taxonomy"]=> string(11) "impact_tags" 
                ["terms"]=> array(1) { 
                  [0]=> string(3) "6,7" 
                } 
                ["field"]=> string(7) "term_id" 
                ["operator"]=> string(2) "IN" 
                ["include_children"]=> bool(true) 
              } 
            } 
            ["relation"]=> string(3) "AND" 
            ["table_aliases":protected]=> array(1) { 
              [0]=> string(21) "wp_term_relationships" 
            } 
            ["queried_terms"]=> array(1) { 
              ["impact_tags"]=> array(2) { 
                ["terms"]=> array(1) { 
                  [0]=> string(3) "6,7" 
                } 
                ["field"]=> string(7) "term_id" 
              } 
            } 
            ["primary_table"]=> string(8) "wp_posts" 
            ["primary_id_column"]=> string(2) "ID" 
          } 
          ["meta_query"]=> object(WP_Meta_Query)#1111 (9) { 
            ["queries"]=> array(0) { } 
            ["relation"]=> NULL 
            ["meta_table"]=> NULL 
            ["meta_id_column"]=> NULL 
            ["primary_table"]=> NULL 
            ["primary_id_column"]=> NULL 
            ["table_aliases":protected]=> array(0) { } 
            ["clauses":protected]=> array(0) { } 
            ["has_or_relation":protected]=> bool(false) 
          } ["date_query"]=> bool(false) 
          ["request"]=> string(364) "SELECT SQL_CALC_FOUND_ROWS wp_posts.ID FROM wp_posts LEFT JOIN wp_term_relationships ON (wp_posts.ID = wp_term_relationships.object_id) WHERE 1=1 AND ( wp_term_relationships.term_taxonomy_id IN (6) ) AND wp_posts.post_type IN ('impacts', 'activities') AND ((wp_posts.post_status = 'publish')) GROUP BY wp_posts.ID ORDER BY wp_posts.post_date DESC LIMIT 0, 10" 
          ["posts"]=> array(1) { 
            [0]=> object(WP_Post)#1096 (24) { 
              ["ID"]=> int(124)
              ["post_author"]=> string(1) "1" 
              ["post_date"]=> string(19) "2018-03-01 15:03:07" 
              ["post_date_gmt"]=> string(19) "2018-03-01 15:03:07" 
              ["post_content"]=> string(292) "A zoonotic disease is an infectious disease that is transmitted between species from animals to humans (or from humans to animals). Animal transmitted diseases such as Brucellosis, Giardiasis and Ringworm (Dermatophytosis) that are transmitted from animals to people are widespread in Africa." 
              ["post_title"]=> string(27) "Animal transmitted diseases" 
              ["post_excerpt"]=> string(0) "" 
              ["post_status"]=> string(7) "publish" 
              ["comment_status"]=> string(6) "closed" 
              ["ping_status"]=> string(6) "closed" 
              ["post_password"]=> string(0) "" 
              ["post_name"]=> string(27) "animal-transmitted-diseases" 
              ["to_ping"]=> string(0) "" 
              ["pinged"]=> string(0) "" 
              ["post_modified"]=> string(19) "2018-05-18 21:08:54" 
              ["post_modified_gmt"]=> string(19) "2018-05-18 21:08:54" 
              ["post_content_filtered"]=> string(0) "" 
              ["post_parent"]=> int(0) 
              ["guid"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=124" 
              ["menu_order"]=> int(0) 
              ["post_type"]=> string(7) "impacts" ["post_mime_type"]=> string(0) "" ["comment_count"]=> string(1) "0" ["filter"]=> string(3) "raw" } } ["post_count"]=> int(1) ["current_post"]=> int(-1) ["in_the_loop"]=> bool(false) ["post"]=> object(WP_Post)#1096 (24) { ["ID"]=> int(124) ["post_author"]=> string(1) "1" ["post_date"]=> string(19) "2018-03-01 15:03:07" ["post_date_gmt"]=> string(19) "2018-03-01 15:03:07" ["post_content"]=> string(292) "A zoonotic disease is an infectious disease that is transmitted between species from animals to humans (or from humans to animals). Animal transmitted diseases such as Brucellosis, Giardiasis and Ringworm (Dermatophytosis) that are transmitted from animals to people are widespread in Africa." ["post_title"]=> string(27) "Animal transmitted diseases" ["post_excerpt"]=> string(0) "" ["post_status"]=> string(7) "publish" ["comment_status"]=> string(6) "closed" ["ping_status"]=> string(6) "closed" ["post_password"]=> string(0) "" ["post_name"]=> string(27) "animal-transmitted-diseases" ["to_ping"]=> string(0) "" ["pinged"]=> string(0) "" ["post_modified"]=> string(19) "2018-05-18 21:08:54" ["post_modified_gmt"]=> string(19) "2018-05-18 21:08:54" ["post_content_filtered"]=> string(0) "" ["post_parent"]=> int(0) ["guid"]=> string(65) "http://dev.childressagency.com/ralf/?post_type=impacts&p=124" ["menu_order"]=> int(0) ["post_type"]=> string(7) "impacts" ["post_mime_type"]=> string(0) "" ["comment_count"]=> string(1) "0" ["filter"]=> string(3) "raw" } ["comment_count"]=> int(0) ["current_comment"]=> int(-1) ["found_posts"]=> string(1) "1" ["max_num_pages"]=> float(1) ["max_num_comment_pages"]=> int(0) ["is_single"]=> bool(false) ["is_preview"]=> bool(false) ["is_page"]=> bool(false) ["is_archive"]=> bool(true) ["is_date"]=> bool(false) ["is_year"]=> bool(false) ["is_month"]=> bool(false) ["is_day"]=> bool(false) ["is_time"]=> bool(false) ["is_author"]=> bool(false) ["is_category"]=> bool(false) ["is_tag"]=> bool(false) ["is_tax"]=> bool(true) ["is_search"]=> bool(false) ["is_feed"]=> bool(false) ["is_comment_feed"]=> bool(false) ["is_trackback"]=> bool(false) ["is_home"]=> bool(false) ["is_404"]=> bool(false) ["is_embed"]=> bool(false) ["is_paged"]=> bool(false) ["is_admin"]=> bool(false) ["is_attachment"]=> bool(false) ["is_singular"]=> bool(false) ["is_robots"]=> bool(false) ["is_posts_page"]=> bool(false) ["is_post_type_archive"]=> bool(false) ["query_vars_hash":"WP_Query":private]=> string(32) "b9408a564c64d34604bec610376f0d51" ["query_vars_changed":"WP_Query":private]=> bool(false) ["thumbnails_cached"]=> bool(false) ["stopwords":"WP_Query":private]=> NULL ["compat_fields":"WP_Query":private]=> array(2) { [0]=> string(15) "query_vars_hash" [1]=> string(18) "query_vars_changed" } ["compat_methods":"WP_Query":private]=> array(2) { [0]=> string(16) "init_query_flags" [1]=> string(15) "parse_tax_query" } }

/////////////////////////////////////


function bidirectional_acf_update_value( $value, $post_id, $field  ) {
	// vars
	$field_name = $field['name'];
	$field_key = $field['key'];
	$global_name = 'is_updating_' . $field_name;
	
	// bail early if this filter was triggered from the update_field() function called within the loop below
	// - this prevents an inifinte loop
	if( !empty($GLOBALS[ $global_name ]) ) return $value;
	
	// set global variable to avoid inifite loop
	// - could also remove_filter() then add_filter() again, but this is simpler
	$GLOBALS[ $global_name ] = 1;
	
	// loop over selected posts and add this $post_id
	if( is_array($value) ) {
	
		foreach( $value as $post_id2 ) {
			// load existing related posts
			$value2 = get_field($field_name, $post_id2, false);
			
			// allow for selected posts to not contain a value
			if( empty($value2) ) {
				$value2 = array();
			}
			
			// bail early if the current $post_id is already found in selected post's $value2
			if( in_array($post_id, $value2) ) continue;
			
			// append the current $post_id to the selected post's 'related_posts' value
			$value2[] = $post_id;
			
			// update the selected post's value (use field's key for performance)
			update_field($field_key, $value2, $post_id2);
		}
	}
	
	// find posts which have been removed
	$old_value = get_field($field_name, $post_id, false);
	if( is_array($old_value) ) {
		
		foreach( $old_value as $post_id2 ) {
			// bail early if this value has not been removed
			if( is_array($value) && in_array($post_id2, $value) ) continue;
			
			// load existing related posts
			$value2 = get_field($field_name, $post_id2, false);
			
			// bail early if no value
			if( empty($value2) ) continue;
			
			// find the position of $post_id within $value2 so we can remove it
			$pos = array_search($post_id, $value2);
			
			// remove
			unset( $value2[ $pos] );
			
			// update the un-selected post's value (use field's key for performance)
			update_field($field_key, $value2, $post_id2);
		}
	}
	
	// reset global varibale to allow this filter to function as per normal
	$GLOBALS[ $global_name ] = 0;
	
	// return
    return $value;
}
add_filter('acf/update_value/name=related_impacts', 'bidirectional_acf_update_value', 10, 3);


/////////////////////////////////////

// add the filter for your relationship field
	add_filter('acf/update_value/key=field_5a980a2e5519d', 'acf_reciprocal_relationship', 10, 3);
	// if you are using 2 relationship fields on different post types
	// add second filter for that fields as well
	add_filter('acf/update_value/key=field_5a980a8d64d2a', 'acf_reciprocal_relationship', 10, 3);
	
	function acf_reciprocal_relationship($value, $post_id, $field) {
		
		// set the two fields that you want to create
		// a two way relationship for
		// these values can be the same field key
		// if you are using a single relationship field
		// on a single post type
		
		// the field key of one side of the relationship
		$key_a = 'field_0123456789abc';
		// the field key of the other side of the relationship
		// as noted above, this can be the same as $key_a
		$key_b = 'field_cba9876543210';
		
		// figure out wich side we're doing and set up variables
		// if the keys are the same above then this won't matter
		// $key_a represents the field for the current posts
		// and $key_b represents the field on related posts
		if ($key_a != $field['key']) {
			// this is side b, swap the value
			$temp = $key_a;
			$key_a = $key_b;
			$key_b = $temp;
		}
		
		// get both fields
		// this gets them by using an acf function
		// that can gets field objects based on field keys
		// we may be getting the same field, but we don't care
		$field_a = acf_get_field($key_a);
		$field_b = acf_get_field($key_b);
		
		// set the field names to check
		// for each post
		$name_a = $field_a['name'];
		$name_b = $field_b['name'];
		
		// get the old value from the current post
		// compare it to the new value to see
		// if anything needs to be updated
		// use get_post_meta() to a avoid conflicts
		$old_values = get_post_meta($post_id, $name_a, true);
		// make sure that the value is an array
		if (!is_array($old_values)) {
			if (empty($old_values)) {
				$old_values = array();
			} else {
				$old_values = array($old_values);
			}
		}
		// set new values to $value
		// we don't want to mess with $value
		$new_values = $value;
		// make sure that the value is an array
		if (!is_array($new_values)) {
			if (empty($new_values)) {
				$new_values = array();
			} else {
				$new_values = array($new_values);
			}
		}
		
		// get differences
		// array_diff returns an array of values from the first
		// array that are not in the second array
		// this gives us lists that need to be added
		// or removed depending on which order we give
		// the arrays in
		
		// this line is commented out, this line should be used when setting
		// up this filter on a new site. getting values and updating values
		// on every relationship will cause a performance issue you should
		// only use the second line "$add = $new_values" when adding this
		// filter to an existing site and then you should switch to the
		// first line as soon as you get everything updated
		// in either case if you have too many existing relationships
		// checking end updated every one of them will more then likely
		// cause your updates to time out.
		//$add = array_diff($new_values, $old_values);
		$add = $new_values;
		$delete = array_diff($old_values, $new_values);
		
		// reorder the arrays to prevent possible invalid index errors
		$add = array_values($add);
		$delete = array_values($delete);
		
		if (!count($add) && !count($delete)) {
			// there are no changes
			// so there's nothing to do
			return $value;
		}
		
		// do deletes first
		// loop through all of the posts that need to have
		// the recipricol relationship removed
		for ($i=0; $i<count($delete); $i++) {
			$related_values = get_post_meta($delete[$i], $name_b, true);
			if (!is_array($related_values)) {
				if (empty($related_values)) {
					$related_values = array();
				} else {
					$related_values = array($related_values);
				}
			}
			// we use array_diff again
			// this will remove the value without needing to loop
			// through the array and find it
			$related_values = array_diff($related_values, array($post_id));
			// insert the new value
			update_post_meta($delete[$i], $name_b, $related_values);
			// insert the acf key reference, just in case
			update_post_meta($delete[$i], '_'.$name_b, $key_b);
		}
		
		// do additions, to add $post_id
		for ($i=0; $i<count($add); $i++) {
			$related_values = get_post_meta($add[$i], $name_b, true);
			if (!is_array($related_values)) {
				if (empty($related_values)) {
					$related_values = array();
				} else {
					$related_values = array($related_values);
				}
			}
			if (!in_array($post_id, $related_values)) {
				// add new relationship if it does not exist
				$related_values[] = $post_id;
			}
			// update value
			update_post_meta($add[$i], $name_b, $related_values);
			// insert the acf key reference, just in case
			update_post_meta($add[$i], '_'.$name_b, $key_b);
		}
		
		return $value;
		
	} // end function acf_reciprocal_relationship